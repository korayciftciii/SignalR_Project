<h4 class="page-title">Dashboard</h4>
<div class="row">
	@*Category Count*@
	<div class="col-md-3">
		<div class="card card-stats card-warning">
			<div class="card-body ">
				<div class="row">
					<div class="col-5">
						<div class="icon-big text-center">
							<i class="la la-tags"></i>
						</div>
					</div>
					<div class="col-7 d-flex align-items-center">
						<div class="numbers">
							<p class="card-category">Categories</p>
							<h4 class="card-title" id="categorycount">*</h4>
							<small class="text-white">Active: <span id="activecategorycount">*</span></small><br />
							<small class="text-white">Passive: <span id="passivecategorycount">*</span></small>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	@*Food Count*@
	<div class="col-md-3">
		<div class="card card-stats card-success">
			<div class="card-body">
				<div class="row">
					<div class="col-5">
						<div class="icon-big text-center">
							<i class="la la-cubes"></i>
						</div>
					</div>
					<div class="col-7 d-flex align-items-center">
						<div class="numbers">
							<p class="card-category">Foods</p>
							<h4 class="card-title" id="foodcount">*</h4>
							<small class="text-white">Active: <span id="activefoodcount">*</span></small><br />
							<small class="text-white">Passive: <span id="passivefoodcount">*</span></small>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	@*Reservations Count*@
	<div class="col-md-3">
		<div class="card card-stats card-danger">
			<div class="card-body">
				<div class="row">
					<div class="col-5">
						<div class="icon-big text-center">
							<i class="la la-calendar"></i>
						</div>
					</div>
					<div class="col-7 d-flex align-items-center">
						<div class="numbers">
							<p class="card-category">Bookings</p>
							<h4 class="card-title" id="bookingcount">*</h4>
							<small class="text-white">Active: <span id="activebookingcount">*</span></small><br />
							<small class="text-white">Passive: <span id="passivebookingcount">*</span></small>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	@*Order Count*@
	<div class="col-md-3">
		<div class="card card-stats card-primary">
			<div class="card-body ">
				<div class="row">
					<div class="col-5">
						<div class="icon-big text-center">
							<i class="la la-check-circle"></i>
						</div>
					</div>
					<div class="col-7 d-flex align-items-center">
						<div class="numbers">
							<p class="card-category">Orders</p>
							<h4 class="card-title" id="ordercount">*</h4>
							<small class="text-white">Active: <span id="activeordercount">*</span></small><br />
							<small class="text-white">Completed: <span id="passiveordercount">*</span></small>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	@*Total Revenue*@
	<div class="col-md-3">
		<div class="card card-stats">
			<div class="card-body ">
				<div class="row">
					<div class="col-5">
						<div class="icon-big text-center">
							<i class="la la-diamond text-warning"></i>
						</div>
					</div>
					<div class="col-7 d-flex align-items-center">
						<div class="numbers">
							<p class="card-category">Total Revenue</p>
							<h4 class="card-title" id="totalrevenue">$0.00</h4>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
    @*Daily Income*@
	<div class="col-md-3">
						<div class="card card-stats">
										<div class="card-body ">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
														<i class="la la-bar-chart text-success"></i>
													</div>
												</div>
												<div class="col-7 d-flex align-items-center">
													<div class="numbers">
														<p class="card-category">Daily Revenue</p>
							<h4 class="card-title" id="dailyrevenue">$0.00</h4>
													</div>
												</div>
											</div>
										</div>
						</div>
								</div>
    @*Avaliable Tables*@
	<div class="col-md-3">
									<div class="card card-stats">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
							<i class="
la la-table text-danger"></i>
													</div>
												</div>
												<div class="col-7 d-flex align-items-center">
													<div class="numbers">
														<p class="card-category">Avaliable Tables</p>
														<h4 class="card-title" id="avaliabletables">*</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
   @*Testimonial Count*@
	<div class="col-md-3">
									<div class="card card-stats">
										<div class="card-body">
											<div class="row">
												<div class="col-5">
													<div class="icon-big text-center">
							<i class="la la-comments text-primary"></i>
													</div>
												</div>
												<div class="col-7 d-flex align-items-center">
													<div class="numbers">
														<p class="card-category">Testimonials</p>
														<h4 class="card-title" id="testimonialcount">*</h4>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div> 
</div>

@section Scripts {
	<script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>
	<script src="~/lib/jquery/dist/jquery.min.js"></script>
	<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script>
				$(function () {
			var connection = new signalR.HubConnectionBuilder()
				.withUrl("https://localhost:7295/SignalRHub")
				.build();

			connection.start().then(function () {
				setInterval(() => {
					connection.invoke("GetAllDashboardData");
				}, 1000);
			}).catch(function (err) {
				console.error(err.toString());
			});

			connection.on("ReceiveAllDashboardData", (data) => {
				$("#categorycount").text(data.categoryCounts.totalCount);
				$("#activecategorycount").text(data.categoryCounts.activeCount);
				$("#passivecategorycount").text(data.categoryCounts.passiveCount);

				$("#foodcount").text(data.foodCounts.totalCount);
				$("#activefoodcount").text(data.foodCounts.activeCount);
				$("#passivefoodcount").text(data.foodCounts.passiveCount);

				$("#ordercount").text(data.orderCounts.totalCount);
				$("#activeordercount").text(data.orderCounts.activeCount);
				$("#passiveordercount").text(data.orderCounts.passiveCount);

				$("#bookingcount").text(data.reservationCounts.totalCount);
				$("#activebookingcount").text(data.reservationCounts.activeCount);
				$("#passivebookingcount").text(data.reservationCounts.passiveCount);

				$("#dailyrevenue").text(`$${Number(data.dailyRevenue).toFixed(2)}`);
				$("#testimonialcount").text(data.testimonialCount);
				$("#totalrevenue").text(`$${Number(data.totalCaseAmount).toFixed(2)}`);
				$("#avaliabletables").text(data.avaliableTableCount);
			});
		});

	</script>
}
